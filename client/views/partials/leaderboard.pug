include ../mixins/playerListing

div(class=(rosters[0].score > 0 ? 'show-winning' : ''))
  each roster in rosters 
    .member-card.bg-light.mb-3
      a.link-discreet(href=`#${roster.user.username}-roster`, data-toggle="collapse", aria-expanded="false", aria-controls=`${roster.user.username}-roster`)
        .member-overview.d-flex.flex-row.justify-content-start.align-items-center
          .p-3
            h2.my-0= roster.score
          .py-3
            img.profile-picture.rounded-circle(src=helpers.userPhoto(roster.user))
          .p-3
            h3.font-weight-normal.my-0= roster.user.username
      .collapse(id=`${roster.user.username}-roster`)
        each player in roster.players
          .d-flex.flex-row
            +playerListing(player)
            if user && roster.user.id === user.id
              .align-middle
                a.danger(href="",
                  data-toggle="modal",
                  data-target="#dropPlayer",
                  data-playerName=player.name
                  data-playerid=player._id)
                  i.fa.fa-minus-circle.text-danger
        if roster.players.length < league.rosterSize
          - let emptySpots = league.rosterSize - roster.players.length
          while emptySpots
            .d-flex.flex-row
              +playerListing()
            - emptySpots--

  .modal.fade#dropPlayer(tabindex="-1", role="dialog", aria-hidden="true")
    .modal-dialog(role="document")
      .modal-content.bg-light
        .modal-header
          h5.modal-title Drop Player
          button.close(type="button", data-dismiss="modal", aria-label="Close")
            span(aria-hidden="true") &times;
        .modal-body Player Name
        .modal-footer
          button.btn.btn-secondary(data-dismiss="modal") Cancel
          form(method="POST" action=`/roster/remove-player`)
            input(type="hidden" name="player" value="")
            button.btn.btn-danger(type="submit") Drop
